<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>Swin - Dashboard</title>

<!-- Custom fonts for this template-->
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

<!-- Page level plugin CSS-->
<link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">

<!-- Custom styles for this template-->
<link href="css/sb-admin.css" rel="stylesheet">

<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">

<link href="weather-icons-master/css/weather-icons-wind.css" rel="stylesheet" type="text/css">
<link href="weather-icons-master/css/weather-icons.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="http://code.jquery.com/jquery-3.2.0.min.js"></script>

<script type="text/javascript" th:inline="JavaScript">
var swinIp = /*[[ ${current.swinIp} ]]*/;
var swinName = /*[[ ${current.swinName} ]]*/;
var rainSensor = /*[[ ${current.rainSensor} ]]*/;
var illuSensor = /*[[ ${current.illuSensor} ]]*/;
var openCurrent = /*[[ ${current.open} ]]*/;
var blindCurrent = /*[[ ${current.blind} ]]*/;
var openChange = !openCurrent;
var blindChange = !blindCurrent;

$(document).ready(function () {
if (openCurrent) {
document.getElementById("openid").className = "btn btn-info btn-circle";
document.getElementById("opentext").innerHTML = "Window Close";
} else {
document.getElementById("openid").className = "btn btn-success btn-circle";
document.getElementById("opentext").innerHTML = "Window Open";
}
if (blindCurrent) {
document.getElementById("blindid").className = "btn btn-info btn-circle";
document.getElementById("blindtext").innerHTML = "Smart Blind Off";
} else {
document.getElementById("blindid").className = "btn btn-success btn-circle";
document.getElementById("blindtext").innerHTML = "Smart Blind On";
}

document.getElementById("illuText").innerHTML = illuSensor;
document.getElementById("rainText").innerHTML = rainSensor;

document.getElementById("linkText").innerHTML = swinName;
document.getElementById("nameText").innerHTML = swinName;
});

window.setTimeout('window.location.reload()', 60000);

function opencontrol() {
alert('개폐 제어 성공');

var form = document.createElement("form");
form.setAttribute("method", "post");
form.setAttribute("action", "/control");

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "swinIp");
insert.setAttribute("value", swinIp);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "swinName");
insert.setAttribute("value", swinName);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "rainSensor");
insert.setAttribute("value", rainSensor);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "illuSensor");
insert.setAttribute("value", illuSensor);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "open");
insert.setAttribute("value", openChange);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "blind");
insert.setAttribute("value", blindCurrent);
form.appendChild(insert);

document.body.appendChild(form);
form.submit();

var form2 = document.createElement("form2");
form2.setAttribute("method", "post");
form2.setAttribute("action", "/json/" + swinIp);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "swinIp");
insert.setAttribute("value", swinIp);
form2.appendChild(insert);

document.body.appendChild(form2);
form2.submit();
}

function blindcontrol() {
alert('블라인드 제어 성공');

var form = document.createElement("form");
form.setAttribute("method", "post");
form.setAttribute("action", "/control");

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "swinIp");
insert.setAttribute("value", swinIp);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "swinName");
insert.setAttribute("value", swinName);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "rainSensor");
insert.setAttribute("value", rainSensor);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "illuSensor");
insert.setAttribute("value", illuSensor);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "open");
insert.setAttribute("value", openCurrent);
form.appendChild(insert);

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "blind");
insert.setAttribute("value", blindChange);
form.appendChild(insert);

document.body.appendChild(form);
form.submit();

var form2 = document.createElement("form2");
form2.setAttribute("method", "post");
form2.setAttribute("action", "/json");

var insert = document.createElement("input");
insert.setAttribute("type", "hidden");
insert.setAttribute("name", "swinIp");
insert.setAttribute("value", swinIp);
form2.appendChild(insert);

document.body.appendChild(form2);
form2.submit();
}
</script>

</head>

<body id="page-top">

<nav class="navbar navbar-expand navbar-dark bg-dark static-top">

<a class="navbar-brand mr-1" href="main.html">S w i n</a>

<button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
<i class="fas fa-bars"></i>
</button>

<!-- Navbar Search -->
<form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0"></form>

<!-- Navbar -->
<ul class="navbar-nav ml-auto ml-md-0">


<li class="nav-item dropdown no-arrow">
<a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
aria-haspopup="true" aria-expanded="false">
<i class="fas fa-user-circle fa-fw"></i>
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
<a class="dropdown-item" href="information.html">회원 정보</a>
<div class="dropdown-divider"></div>
<a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">로그아웃</a>
</div>
</li>
</ul>

</nav>

<!-- Page Wrapper -->
<div id="wrapper">

<!-- Sidebar -->
<ul class="sidebar navbar-nav">

<!-- Nav Item - Weather -->
<li class="nav-item">
<a class="nav-link" href="index.html">
<i class="fas fa-fw fa-sun"></i>
<span>날씨</span>
</a>
</li>

<!-- Nav Item - Main -->
<li class="nav-item active">
<a class="nav-link" href="main.html">
<i class="fas fa-fw fa-home"></i>
<span>창문 제어</span>
</a>
</li>

</ul>
<!-- End of Sidebar -->

<div id="content-wrapper">

<div class="container-fluid">

<!-- Breadcrumbs-->
<ol class="breadcrumb">
<li class="breadcrumb-item">
<a href="main.html">창문 제어</a>
</li>
<li class="breadcrumb-item active" id="linkText"></li>
</ol>

<div class="text-center">
<h1 id="nameText"></h1>
<hr>
</div>

<div class="card mb-3">
<div class="card-header">
<i class="fas fa-fw fa-columns"></i>
창문 제어
</div>

<p>
<div class="card-body">
<div class="text-center">
<a id="openid" href="#" onclick="opencontrol();" class="btn btn-success btn-circle">
<i class="far fa-window-maximize fa-3x"></i>
<div id="opentext" class="text-white"></div>
</a>

<a id="blindid" href="#" onclick="blindcontrol();" class="btn btn-info btn-circle">
<i class="fas fa-window-maximize fa-3x"></i>
<div id="blindtext" class="text-white"></div>
</a>
</div>
</div>
</p>

<div id="updated" class="card-footer small text-muted"></div>
</div>

<div class="card mb-3">
<div class="card-header">
<i class="fas fa-fw fa-cloud-sun"></i>
환경 센서
</div>
<p>
<div class="card-body">

<div class="row">

<div class="col-xl-3 col-md-6 mb-4">
<div class="card border shadow h-100 py-2">
<div class="card-body">
<div class="row no-gutters align-items-center">
<div class="col mr-2">
<div
class="text-xs font-weight-bold text-primary text-uppercase mb-1">
Illumination (조도)</div>
<div class="h4 mb-0 font-weight-bold" id="illuText"></div>
<div class="h6 mb-0 font-weight-bold">1023(Low)~0(High)</div>
</div>
<div class="col-auto">
<i class="icon wi wi-day-sunny fa-3x"></i>
</div>
</div>
</div>
</div>
</div>

<div class="col-xl-3 col-md-6 mb-4">
<div class="card border shadow h-100 py-2">
<div class="card-body">
<div class="row no-gutters align-items-center">
<div class="col mr-2">
<div
class="text-xs font-weight-bold text-success text-uppercase mb-1">
Rain (빗물)</div>
<div class="h4 mb-0 font-weight-bold" id="rainText"></div>
<div class="h6 mb-0 font-weight-bold">1023(Low)~0(High)</div>
</div>
<div class="col-auto">
<i class="fas fa-cloud-rain fa-3x "></i>
</div>
</div>
</div>
</div>
</div>

<div class="col-xl-3 col-md-6 mb-4">
<div class="card border shadow h-100 py-2">
<div class="card-body">
<div class="row no-gutters align-items-center">
<div class="col mr-2">
<div
class="text-xs font-weight-bold text-warning text-uppercase mb-1">
Temperature (온도)</div>
<div class="h4 mb-0 font-weight-bold">25°C</div>
</div>
<div class="col-auto">
<i class="icon wi wi-thermometer fa-3x"></i>
</div>
</div>
</div>
</div>
</div>

<div class="col-xl-3 col-md-6 mb-4">
<div class="card border shadow h-100 py-2">
<div class="card-body">
<div class="row no-gutters align-items-center">
<div class="col mr-2">
<div
class="text-xs font-weight-bold text-danger text-uppercase mb-1">
Dust (미세먼지)</div>
<div class="h4 mb-0 font-weight-bold">59ug/m3</div>
</div>
<div class="col-auto">
<i class="icon wi wi-sandstorm fa-3x"></i>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</p>
<div id="updated" class="card-footer small text-muted"></div>
</div>


<!-- Button-->
<div class="text-center">

<a href="#" class="btn btn-danger btn-circle" data-toggle="modal" data-target="#autoModal">
<i class="fas fa-cog"></i>
<div class="text-white-50 small">Auto</div>
</a>

<a href="main.html" class="btn btn-primary btn-circle btn-lg">
<i class="fas fa-home"></i>
<div class="text-white-50 small">Home</div>
</a>

<a href="#" class="btn btn-success" data-toggle="modal" data-target="#deletionModal">
<i class="fas fa-window-close"></i>
<div class="text-white-50 small">Deletion</div>
</a>
</div>
<br>

</div>
<!-- /.container-fluid -->

<!-- Sticky Footer -->
<footer class="sticky-footer">
<div class="container my-auto">
<div class="copyright text-center my-auto">
<span>Sungkyul University © Division of Computer Engineering 2014</span>
</div>
</div>
</footer>

</div>
<!-- /.content-wrapper -->

</div>
<!-- /#wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
<i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
<button class="close" type="button" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
</div>
<div class="modal-body">종료 할 준비가 되면 아래의 "로그아웃"을 선택하십시오.</div>
<div class="modal-footer">
<button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
<form th:action="@{/logout}" method="post" style="display:inline"><input type="submit"
class="btn btn-primary" value="로그아웃" /></form>
</div>
</div>
</div>
</div>

<!-- AUTO Modal-->
<div class="modal fade" id="autoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="exampleModalLabel">자동 제어 실행</h5>
<button class="close" type="button" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
</div>
<div class="modal-body">창문 자동 제어를 실행하시려면 아래의 "활성화"를 선택하십시오.</div>
<div class="modal-footer">
<button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
<button class="btn btn_hide btn-primary" data-dismiss="modal">활성화</button>
</div>
</div>
</div>
</div>

<!-- Deletion Modal-->
<div class="modal fade" id="deletionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="exampleModalLabel">제품 삭제</h5>
<button class="close" type="button" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
</div>
<div class="modal-body">정말로 삭제하시겠습니까?</div>
<div class="modal-footer">
<button class="btn btn-secondary" type="button" data-dismiss="modal">취소</button>
<form th:action="@{'/deletion'(swinIp=${current.swinIp})}" method="post" style="display:inline">
<input type="submit" class="btn btn-primary" value="삭제" /></form>
</div>
</div>
</div>
</div>

<!-- Bootstrap core JavaScript-->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="js/sb-admin.min.js"></script>

<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

</body>

</html>